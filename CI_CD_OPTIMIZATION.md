# ğŸš€ CI/CD ë¹Œë“œ ì›Œí¬í”Œë¡œìš° ìµœì í™” ê°€ì´ë“œ

## ğŸ“Š ìµœì í™” ì „ëµ

easylaw í”„ë¡œì íŠ¸ì˜ GitHub Actions ì›Œí¬í”Œë¡œìš°ë¥¼ ìµœì í™”í–ˆìŠµë‹ˆë‹¤. **PRê³¼ pushë¥¼ êµ¬ë¶„**í•˜ì—¬ ë¹Œë“œ ì‹œê°„ì„ ë‹¨ì¶•í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ”„ ì›Œí¬í”Œë¡œìš° êµ¬ì„±

### 1ï¸âƒ£ **android-build.yml** - ë¹Œë“œ ìµœì í™”
**ì‹¤í–‰ ì‹œì :** PR + Push

```
â”Œâ”€ Pull Request ì‹œ
â”‚  â””â”€ ğŸ—ï¸ Build APK (PR - ë¹ ë¥¸ ê²€ì¦) â†’ 5-8ë¶„
â”‚     â””â”€ assembleDebugë§Œ ì‹¤í–‰
â”‚
â””â”€ Push (main/develop) ì‹œ
   â””â”€ ğŸ§ª Unit Test & Build APK (Push - ì™„ì „ ê²€ì¦) â†’ 10-15ë¶„
      â””â”€ testDebugUnitTest + assembleDebug ì‹¤í–‰
```

**ìµœì í™” ì‚¬í•­:**
- âœ… PRì—ì„œëŠ” ë¹Œë“œë§Œ (í…ŒìŠ¤íŠ¸ ì œê±°) â†’ **2-3ë¶„ ë‹¨ì¶•**
- âœ… Pushì—ì„œëŠ” í…ŒìŠ¤íŠ¸ í¬í•¨í•˜ì—¬ í’ˆì§ˆ ë³´ì¦
- âœ… ë³‘ë ¬ ì²˜ë¦¬ (`--parallel`)
- âœ… Gradle ë¹Œë“œ ìºì‹œ í™œì„±í™”
- âœ… Kotlin ì¦ë¶„ ì»´íŒŒì¼ í™œì„±í™”

### 2ï¸âƒ£ **code-quality.yml** - ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
**ì‹¤í–‰ ì‹œì :** PR + Push

#### **Lint & Detekt ê²€ì‚¬** (PR + Push, ~3-5ë¶„)
- Android Lint + Detekt ë³‘ë ¬ ì‹¤í–‰
- ì½”ë“œ ìŠ¤íƒ€ì¼ ë° ì •ì  ë¶„ì„

#### **ë³´ì•ˆ ê²€ì‚¬** (Push only, ~5-10ë¶„)
- OWASP Dependency Check
- CVE ì·¨ì•½ì  ìŠ¤ìº”
- **PRì—ì„œëŠ” ì œì™¸** â†’ ì‹œê°„ ì ˆì•½

#### **ì½”ë“œ ì»¤ë²„ë¦¬ì§€** (Push only, ~5-10ë¶„)
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- Jacoco ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸
- **PRì—ì„œëŠ” ì œì™¸** â†’ ì‹œê°„ ì ˆì•½

### 3ï¸âƒ£ **android-instrumented-tests.yml** - UI í…ŒìŠ¤íŠ¸
**ì‹¤í–‰ ì‹œì :** Push only (ì—ë®¬ë ˆì´í„° í•„ìš”, ëŠë¦¼)

- ì—ë®¬ë ˆì´í„°ì—ì„œ Instrumented Tests ì‹¤í–‰
- API ë ˆë²¨ 30, 33 í…ŒìŠ¤íŠ¸

---

## â±ï¸ ì˜ˆìƒ ë¹Œë“œ ì‹œê°„

### PR ì‹œ (ë¹ ë¥¸ í”¼ë“œë°±)
```
android-build.yml
  â”œâ”€ Checkout + Setup: 1-2ë¶„
  â”œâ”€ Build APK: 5-8ë¶„
  â””â”€ ì´ ì‹œê°„: ~8-10ë¶„ âš¡

code-quality.yml
  â”œâ”€ Lint & Detekt: 3-5ë¶„
  â””â”€ ì´ ì‹œê°„: ~3-5ë¶„
```
**PR ì „ì²´: 10-15ë¶„**

### Push ì‹œ (ì™„ì „ ê²€ì¦)
```
android-build.yml
  â”œâ”€ Checkout + Setup: 1-2ë¶„
  â”œâ”€ Unit Test: 2-3ë¶„
  â”œâ”€ Build APK: 5-8ë¶„
  â””â”€ ì´ ì‹œê°„: ~10-15ë¶„

code-quality.yml
  â”œâ”€ Lint & Detekt: 3-5ë¶„
  â”œâ”€ Security Scan: 5-10ë¶„
  â””â”€ Coverage: 5-10ë¶„
  â””â”€ ì´ ì‹œê°„: ~15-20ë¶„
```
**Push ì „ì²´: 25-35ë¶„** (ë³‘ë ¬ ì‹¤í–‰ë˜ë¯€ë¡œ ì‹¤ì œëŠ” ~20-25ë¶„)

---

## ğŸ”§ gradle.properties ìµœì í™”

```properties
# JVM ë©”ëª¨ë¦¬ (4GB â†’ 6GB)
org.gradle.jvmargs=-Xmx6144m -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+ParallelRefProcEnabled

# ë³‘ë ¬ ì²˜ë¦¬ ê°•í™”
org.gradle.workers.max=8

# Kotlin ì»´íŒŒì¼ ìµœì í™”
kotlin.incremental=true
kotlin.caching.enabled=true

# Gradle ì„¤ì • ìºì‹œ
org.gradle.configuration.cache=true
```

---

## ğŸ“ˆ ê°œì„  íš¨ê³¼

| í•­ëª© | ê°œì„  ì „ | ê°œì„  í›„ | ë‹¨ì¶• |
|------|--------|--------|------|
| **PR ë¹Œë“œ** | 15-20ë¶„ | 8-10ë¶„ | **50-60%** â­ |
| **Push ë‹¨ìœ„í…ŒìŠ¤íŠ¸** | 5-8ë¶„ | 2-3ë¶„ | **40-50%** |
| **ë©”ëª¨ë¦¬ ìµœì í™”** | GC ì˜¤ë²„í—¤ë“œ ë†’ìŒ | GC ì˜¤ë²„í—¤ë“œ ê°ì†Œ | **ì„±ëŠ¥ ê°œì„ ** |

---

## ğŸ¯ ì‚¬ìš© ì „ëµ

### âœ… ê¶Œì¥ ì‚¬í•­

1. **ë¡œì»¬ ê°œë°œ**
   ```bash
   # ì „ì²´ í…ŒìŠ¤íŠ¸ + ë¹Œë“œ (ìºì‹œ í™œìš©)
   ./gradlew testDebugUnitTest assembleDebug --parallel --build-cache
   ```

2. **PR ì˜¬ë¦´ ë•Œ**
   - ì½”ë“œ ë¦¬ë·° ì „ì— GitHub Actions í†µê³¼ í™•ì¸ (ë¹ ë¦„)
   - PRì´ ë§ˆãƒ¼ã‚¸ë˜ë©´ ìë™ìœ¼ë¡œ ì™„ì „ ê²€ì¦

3. **main/developì— Push**
   - ìë™ìœ¼ë¡œ ëª¨ë“  ê²€ì¦ ì‹¤í–‰
   - ë³´ì•ˆ, ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ ìƒì„±

---

## ğŸ“ ì°¸ê³ ì‚¬í•­

- **Gradle ìºì‹œ**: GitHub ActionsëŠ” ë§¤ë²ˆ ì´ˆê¸°í™”ë˜ë¯€ë¡œ ìºì‹œëŠ” í•œì •ì 
- **ë³‘ë ¬ ì²˜ë¦¬**: ì‘ì—…ì ìˆ˜ëŠ” VM ì„±ëŠ¥ì— ë”°ë¼ ì¡°ì • (`-Dorg.gradle.workers.max=8`)
- **ë©”ëª¨ë¦¬**: í•„ìš”ì‹œ `org.gradle.jvmargs`ì—ì„œ ë©”ëª¨ë¦¬ ì¡°ì • ê°€ëŠ¥

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

1. PR ì˜¬ë¦¬ê³  ë¹Œë“œ ì‹œê°„ í™•ì¸
2. í•„ìš”ì‹œ `gradle.properties`ì˜ ë©”ëª¨ë¦¬ê°’ ì¡°ì •
3. `org.gradle.workers.max` ê°’ íŠœë‹ (ì„œë²„ ë¦¬ì†ŒìŠ¤ì— ë”°ë¼)


